#include <stdio.h>
#include <stdlib.h>

typedef struct cvor
{
	char karakter;
	struct cvor* sledeci;
} tCvor;

int meni();
void dodaj(tCvor**, char);
void modifikuj(tCvor**, char, char);
tCvor* pronadji(tCvor*, char);
void printList(tCvor*);
void unisti(tCvor*);

int main()
{
	char slovo1, slovo2;
	int broj;
	tCvor* glava = NULL;
	tCvor* temp;

	while (1)
	{
		switch (meni())
		{
		case 1:
			printf("Unesite slovo\n> ");
			getchar();
			slovo1 = getc(stdin);
			dodaj(&glava, slovo1);
			break;

		case 2:
			printf("Unesite slovo koje zelite da modifikujete i u koje slovo\n> ");
			getchar();
			slovo1 = getc(stdin);
			getchar();
			slovo2 = getc(stdin);
			modifikuj(&glava, slovo1, slovo2);
			break;

		case 3:
			printf("Unesite slovo koje zelite da pronadjete\n> ");
			getchar();
			slovo1 = getc(stdin);

			broj = 0;
			temp = glava;
			while ((temp = pronadji(temp, slovo1)) != NULL)
			{
				broj++;
				temp = temp->sledeci;
			}

			printf("Karaktera %c ima %d\n", slovo1, broj);
			break;

		case 4:
			printList(glava);
			break;

		case 5:
			unisti(glava);
			return 0;
		}
	}
}

int meni()
{
	int izbor;

	printf("\nOdaberite nesto od ponudjenog:\n");
	printf("\t1. Sortirani unos karaktera\n");
	printf("\t2. Modifikacija karaktera\n");
	printf("\t3. Trazenje karaktera\n");
	printf("\t4. Prikaz liste\n");
	printf("\t5. Kraj programa\n");
	printf("> ");

	scanf("%d", &izbor);
	return izbor;
}

void dodaj(tCvor** glava, char slovo)
{
	tCvor* novi = malloc(sizeof(tCvor));
	novi->karakter = slovo;
	novi->sledeci = NULL;

	if (*glava == NULL || (*glava)->karakter >= slovo)
	{
		novi->sledeci = *glava;
		*glava = novi;
		return;
	}

	tCvor* temp = *glava;
	while (temp->sledeci && temp->sledeci->karakter < slovo)
		temp = temp->sledeci;

	novi->sledeci = temp->sledeci;
	temp->sledeci = novi;
}

void modifikuj(tCvor** glava, char staro, char novo)
{
	tCvor *temp = *glava, *prev = NULL;

	while (temp && temp->karakter != staro)
	{
		prev = temp;
		temp = temp->sledeci;
	}

	if (!temp)
		return;

	if (prev)
		prev->sledeci = temp->sledeci;
	else
		*glava = temp->sledeci;

	temp->karakter = novo;

	if (*glava == NULL || (*glava)->karakter >= novo)
	{
		temp->sledeci = *glava;
		*glava = temp;
		return;
	}

	tCvor* t = *glava;
	while (t->sledeci && t->sledeci->karakter < novo)
		t = t->sledeci;

	temp->sledeci = t->sledeci;
	t->sledeci = temp;
}

tCvor* pronadji(tCvor* glava, char slovo)
{
	while (glava)
	{
		if (glava->karakter == slovo)
			return glava;
		glava = glava->sledeci;
	}
	return NULL;
}

void printList(tCvor* glava)
{
	printf("Lista: ");
	while (glava)
	{
		printf("%c ", glava->karakter);
		glava = glava->sledeci;
	}
	printf("\n");
}

void unisti(tCvor* glava)
{
	tCvor* temp;
	while (glava)
	{
		temp = glava;
		glava = glava->sledeci;
		free(temp);
	}
}
